<mat-accordion class="example-headers-align">
  <form [formGroup]="formulario" class="form">
    <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
      <!-- Expansion Panel -->
      <mat-expansion-panel-header>
        <mat-panel-title>
          Avaliação
        </mat-panel-title>
      </mat-expansion-panel-header>
      <!-------------------------------------- Avaliação -------------------------------------->
      <div class="container">
        <mat-form-field class="full-width">
          <!-- Título //-->
          <input matInput placeholder="Título" formControlName="titulo" autocomplete="off">
        </mat-form-field> <!-- Título //-->
        <div>
          <mat-form-field class="width-10">
            <!-- Período -->
            <input matInput placeholder="Período" formControlName="periodo" autocomplete="off">
          </mat-form-field> <!-- Período a -->

          <label class="slide-toggle">
            <!-- Status Ativado -->
            <mat-slide-toggle formControlName="ativo" class="margin">Ativo</mat-slide-toggle>
          </label>

          <label class="slide-toggle">
            <!-- Status Terminado -->
            <mat-slide-toggle formControlName="terminado" class="margin">Terminado</mat-slide-toggle>
          </label>
        </div>

        <mat-form-field class="full-width">
          <!-- Observação -->
          <textarea matInput placeholder="Observações" formControlName="observacao"> </textarea>
        </mat-form-field> <!-- Observação --> <br /><br />

        <div>
          <!-- Público Limite -->
          <label>Público Alvo</label>
          <mat-selection-list matInput #publicos formControlName="publico_alvo">
            <mat-list-option *ngFor="let publico of tipoPublicos" [value]="publico.value">
              {{publico.viewValue}}
            </mat-list-option>
          </mat-selection-list>
        </div><br /><!-- Público Limite -->

        <mat-form-field>
          <!-- Data Limite -->
          <input matInput placeholder="Data Limite" formControlName="data_limite" [matDatepicker]="picker2">
          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field> <!-- Data Limite -->
      </div>
      <!-------------------------------------- Avaliação -------------------------------------->
      <mat-action-row>
        <button mat-button color="primary" type="submit" (click)="salvar()">Próximo</button>
      </mat-action-row>
    </mat-expansion-panel>

    <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Questionário
        </mat-panel-title>
      </mat-expansion-panel-header>
      <!-------------------------------------- Questionário -------------------------------------->
      <div class="container" formArrayName="questionarios">
        <ng-container *ngFor="let item of questionarios.controls; let i=index">
          <div [formGroupName]="i">
            <mat-form-field class="full-width">
              <input matInput type="text" formControlName="topico" autocomplete="off" value="" placeholder="Tópico">
            </mat-form-field><br /><br />

            <div>
              <label>Público Alvo</label>
              <mat-selection-list matInput #publicos formControlName="publico_alvo">
                <mat-list-option *ngFor="let publico of tipoPublicos" [value]="publico.value">
                  {{publico.viewValue}}
                </mat-list-option>
              </mat-selection-list>
            </div><br />

            <!-- Típo de resposta -->
            <div>
              <label id="radio-group-label">Escolha o típo de resposta desejado</label>
              <mat-radio-group aria-labelledby="example-radio-group-label" class="radio-group"
                formControlName="tipo_resposta">
                <mat-radio-button class="radio-button" *ngFor="let tpresposta of tipoRespostas"
                  [value]="tpresposta.value">
                  {{tpresposta.viewValue}}
                </mat-radio-button>
              </mat-radio-group>
            </div><!-- Típo de resposta -->

            <!--  Possiveis respostas -->
            <mat-accordion *ngIf="this.questionarios.value[i].tipo_resposta == '0'">
              <!--Expansion Panel -->
              <mat-expansion-panel>
                <!--Expansion Panel -->
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Possiveis Respostas
                  </mat-panel-title>
                </mat-expansion-panel-header>

                <div formArrayName="possiveis_respostas">
                  <mat-form-field *ngFor="let item of possiveis_respostas.controls; let j=index">
                    <input matInput type="text" [formControlName]="j" autocomplete="off" value=""
                      placeholder="Valor/Reposta">
                  </mat-form-field>
                </div>
                <div formArrayName="labels_respostas">
                  <mat-form-field *ngFor="let item of possiveis_respostas.controls; let k=index">
                    <input matInput type="text" [formControlName]="k" autocomplete="off" value=""
                      placeholder="Descrição">
                  </mat-form-field>
                </div>
                <button class="buttonClicks" mat-mini-fab type="submit" (click)="addTipoResposta()">
                  <mat-icon>add</mat-icon>
                </button>
              </mat-expansion-panel>
              <!--Expansion Panel -->
            </mat-accordion>
            <br />

            <!-- Por disciplina -->
            <label>
              <mat-slide-toggle formControlName="por_disciplina" class="margin">Por disciplina</mat-slide-toggle>
            </label> <!-- Por disciplina -->
            <br /><br />

            <!--  Possiveis Questão -->
            <mat-accordion *ngIf="this.questionarios.value[i].por_disciplina != '1'">
              <!--Expansion Panel -->
              <mat-expansion-panel>
                <!--Expansion Panel -->
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Questões
                  </mat-panel-title>
                </mat-expansion-panel-header>

                <div formArrayName="questoes">
                  <mat-form-field *ngFor="let item of questoes.controls; let l=index" class="full-width">
                    <input matInput type="text" [formControlName]="l" autocomplete="off" value=""
                      placeholder="Questão">
                  </mat-form-field>
                </div>

                <button class="buttonClicks" mat-mini-fab type="submit" (click)="addQuestao()">
                  <mat-icon>add</mat-icon>
                </button>
              </mat-expansion-panel>
              <!--Expansion Panel -->
            </mat-accordion>

            <mat-divider></mat-divider>
            <br /><br />
          </div>
        </ng-container>
      </div>
      <!--
      <button mat-button type="button" color="primary" (click)="teste()">
        <mat-icon>add</mat-icon>
      </button>-->
      <!-------------------------------------- Questionário -------------------------------------->
      <mat-action-row>
        <button mat-button color="warn" (click)="prevStep()">Voltar</button>
        <button mat-button color="accent" type="button" (click)="novoQuestionario()">Acrescentar</button>
        <button mat-button color="primary" (click)="salvar()">Finalizar</button>
      </mat-action-row>
    </mat-expansion-panel>
  </form>
</mat-accordion><!-- Expansion Panel -->