<mat-accordion class="example-headers-align">
  <form [formGroup]="formulario" class="form">

    <!-- Expansion Panel -->
    <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Avaliação
        </mat-panel-title>
      </mat-expansion-panel-header>
      <!-------------------------------------- Avaliação -------------------------------------->
      <div class="container">
        <mat-form-field class="full-width">
          <!-- Título //-->
          <input matInput placeholder="Título" formControlName="titulo" required autocomplete="off">
        </mat-form-field> <!-- Título //-->
        <div>
          <mat-form-field class="width-10">
            <!-- Período -->
            <input matInput placeholder="Período" formControlName="periodo" autocomplete="off" required>
          </mat-form-field> <!-- Período a -->

          <label class="slide-toggle">
            <!-- Status Ativado -->
            <mat-slide-toggle formControlName="ativo" class="margin">Ativo</mat-slide-toggle>
          </label>

          <label class="slide-toggle">
            <!-- Status Terminado -->
            <mat-slide-toggle formControlName="terminado" class="margin">Terminado</mat-slide-toggle>
          </label>
        </div>

        <mat-form-field class="full-width">
          <!-- Observação -->
          <textarea matInput placeholder="Observações" formControlName="observacao"> </textarea>
        </mat-form-field> <!-- Observação --> <br /><br />

        <div>
          <label>Público Alvo</label> <!-- Público Alvo -->
          <mat-selection-list matInput #publicos formControlName="publico_alvo">
            <mat-list-option *ngFor="let publico of tipoPublicos" [value]="publico.value">
              {{publico.viewValue}}
            </mat-list-option>
          </mat-selection-list> <!-- Público Alvo -->
        </div>

        <mat-form-field>
          <!-- Data Limite -->
          <input matInput placeholder="Data Limite" formControlName="data_limite" [matDatepicker]="picker2" required>
          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field> <!-- Data Limite -->
      </div>
      <!-------------------------------------- Avaliação -------------------------------------->
      <mat-action-row>
        <button mat-button color="primary" (click)="saveAval()">Próximo</button>
      </mat-action-row>
    </mat-expansion-panel>

    <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Questionário
        </mat-panel-title>
      </mat-expansion-panel-header>
      <!-------------------------------------- Questionário -------------------------------------->
      <div class="container" formArrayName="questionarios">
        <div *ngFor="let item of questionarios.controls; let i=index">

          <div [formGroupName]="i" *ngIf="this.questionarios.length-1 == i">
            <mat-form-field class="full-width">
              <!-- Tópico // -->
              <input matInput type="text" placeholder="Tópico" formControlName="topico" value="" autocomplete="off"
                required>
            </mat-form-field> <!-- Tópico // --><br /><br />
            <div>
              <!-- Público Alvo -->
              <label>Público Alvo</label>
              <mat-selection-list matInput #publicos formControlName="publico_alvo">
                <mat-list-option *ngFor="let publico of tipoPublicos" [value]="publico.value">
                  {{publico.viewValue}}
                </mat-list-option>
              </mat-selection-list>
            </div><!-- Público Alvo --><br />

            <!-- Típo de resposta -->
            <div>
              <label id="radio-group-label">Escolha o típo de resposta desejado</label>
              <mat-radio-group aria-labelledby="example-radio-group-label" class="radio-group"
                formControlName="tipo_resposta">
                <mat-radio-button class="radio-button" *ngFor="let tpresposta of tipoRespostas"
                  [value]="tpresposta.value">
                  {{tpresposta.viewValue}}
                </mat-radio-button>
              </mat-radio-group>
            </div><!-- Típo de resposta -->

            <!--  Possiveis respostas -->
            <mat-accordion *ngIf="this.formulario.controls.questionarios.value.tipo_resposta == '0'">
              <!--Expansion Panel -->
              <mat-expansion-panel>
                <!--Expansion Panel -->
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Possiveis Respostas
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div
                  *ngFor="let item of this.formulario.controls.questionarios.get('valResp').controls; let i = index;">
                  <div formArrayName="valResp">
                    <div [formGroupName]="i">
                      <mat-form-field>
                        <!-- labels_respostas -->
                        <input matInput placeholder="Valor/Reposta" formControlName="possiveis_respostas">
                      </mat-form-field> <!-- Possiveis respostas -->
                      <mat-form-field class="slide-toggle">
                        <!-- Valor de Reposta // -->
                        <input matInput placeholder="Descrição" formControlName="labels_respostas">
                      </mat-form-field> <!-- Valor de Reposta // -->
                    </div>
                  </div>
                </div>
                <button class="buttonClicks" mat-mini-fab type="submit" (click)="addValResp()">
                  <mat-icon aria-label="Example icon-button with a add icon">add</mat-icon>
                </button>
              </mat-expansion-panel>
              <!--Expansion Panel -->
            </mat-accordion>
            <br />

            <!-- Por disciplina -->
            <label>
              <mat-slide-toggle formControlName="por_disciplina" class="margin">Por disciplina</mat-slide-toggle>
            </label> <!-- Por disciplina -->
            <br /><br />

            <!--  Possiveis Questão -->
            <mat-accordion *ngIf="this.formulario.controls.questionarios.value.por_disciplina == '0'">
              <!--Expansion Panel -->
              <mat-expansion-panel>
                <!--Expansion Panel -->
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Questões
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div
                  *ngFor="let item of this.formulario.controls.questionarios.get('valQuest').controls; let i = index;">
                  <div formArrayName="valQuest">
                    <div [formGroupName]="i">
                      <mat-form-field class="full-width">
                        <!-- Questão // -->
                        <input matInput placeholder="Questão" formControlName="questoes">
                      </mat-form-field>
                    </div>
                  </div>
                </div>
                <button class="buttonClicks" mat-mini-fab type="submit" (click)="addQuest()">
                  <mat-icon aria-label="Example icon-button with a add icon">add</mat-icon>
                </button>
              </mat-expansion-panel>
              <!--Expansion Panel -->
            </mat-accordion>
          </div>
        </div>
      </div>
      <!-------------------------------------- Questionário -------------------------------------->
      <mat-action-row>
        <button mat-button color="warn" (click)="prevStep()">Voltar</button>
        <button mat-button color="accent" type="submit" (click)="saveQuest()">Acrescentar</button>
        <button mat-button color="primary" (click)="finalizandoStep()">Próximo</button>
      </mat-action-row>
    </mat-expansion-panel>

    <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Breve Resultado
        </mat-panel-title>
      </mat-expansion-panel-header>
      <!-------------------------------------- Conteudo -------------------------------------->
      <mat-card formArrayName="questionarios">
        <div class="cardprincipal">
          <h3>{{this.formulario.get('titulo').value}}</h3>
          <p>Data limite: {{this.formulario.get('data_limite').value}} - Referente ao período:
            {{this.formulario.get('periodo').value}}</p>
          <p>Observações: {{this.formulario.get('observacao').value}}</p>
        </div>
        <mat-divider></mat-divider>

        <div class="cardprincipal" *ngFor="let quest of questionarios.value; let j=index">
          <h3>{{j+1}} - {{quest.topico}}</h3>

          <div class="container">
            <div [formGroupName]="j">
              <mat-form-field class="full-width">
                <!-- Tópico -->
                <input matInput type="text" placeholder="Tópico" formControlName="topico" value="{{quest.topico}}"
                  autocomplete="off">
              </mat-form-field><!-- Tópico -->
              <br /><br />
              <!--  

                <div>
              <!-- Público Alvo 
              <label>Público Alvo</label>
              <mat-selection-list matInput #publicos formControlName="publico_alvo">
                <mat-list-option *ngFor="let publico of tipoPublicos" [value]="publico.value">
                  {{publico.viewValue}}
                </mat-list-option>
              </mat-selection-list>
            </div><!-- Público Alvo <br />

            <!-- Típo de resposta 
            <div>
              <label id="radio-group-label">Escolha o típo de resposta desejado</label>
              <mat-radio-group aria-labelledby="example-radio-group-label" class="radio-group"
                formControlName="tipo_resposta">
                <mat-radio-button class="radio-button" *ngFor="let tpresposta of tipoRespostas"
                  [value]="tpresposta.value">
                  {{tpresposta.viewValue}}
                </mat-radio-button>
              </mat-radio-group>
            </div><!-- Típo de resposta -->

            <!--  Possiveis respostas 
                Possiveis Respostas
                <div
                  *ngFor="let item of this.formulario.controls.questionarios.get('valResp').controls; let i = index;">
                  <div formArrayName="valResp">
                    <div [formGroupName]="i">
                      <mat-form-field>
                        <input matInput placeholder="Valor/Reposta" formControlName="possiveis_respostas" value="{{quest.possiveis_respostas}}">
                      </mat-form-field> 
                      <mat-form-field class="slide-toggle">
                        <input matInput placeholder="Descrição" formControlName="labels_respostas" value="{{quest.labels_respostas}}">
                      </mat-form-field>
                    </div>
                  </div>
                </div>
            <br />-->

            <!-- Por disciplina 
            <label>
              <mat-slide-toggle formControlName="por_disciplina" class="margin">Por disciplina</mat-slide-toggle>
            </label> <!-- Por disciplina 
            <br /><br />

            <!--  Possiveis Questão 
            <mat-accordion *ngIf="this.formulario.controls.questionarios.value.por_disciplina == '0'">
              <!--Expansion Panel 
              <mat-expansion-panel>
                <!--Expansion Panel 
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Questões
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div
                  *ngFor="let item of this.formulario.controls.questionarios.get('valQuest').controls; let i = index;">
                  <div formArrayName="valQuest">
                    <div [formGroupName]="i">
                      <mat-form-field class="full-width">
                        <!-- Questão // -
                        <input matInput placeholder="Questão" formControlName="questoes">
                      </mat-form-field>
                    </div>
                  </div>
                </div>
                <button class="buttonClicks" mat-mini-fab type="submit" (click)="addQuest()">
                  <mat-icon aria-label="Example icon-button with a add icon">add</mat-icon>
                </button>
              </mat-expansion-panel>
              <!--Expansion Panel 
            </mat-accordion>


              -->

            </div>
          </div>


          <mat-divider></mat-divider>
        </div>

        <button class="buttonClicks" mat-mini-fab type="submit" (click)="teste()">TESTE</button>

      </mat-card>
      <!-------------------------------------- Conteudo -------------------------------------->
      <mat-action-row>
        <button mat-button color="warn" (click)="prevStep()">Voltar</button>
        <button mat-button color="primary" (click)="finalizar()">Finalizar</button>
      </mat-action-row>
    </mat-expansion-panel>

  </form>
</mat-accordion><!-- Expansion Panel -->